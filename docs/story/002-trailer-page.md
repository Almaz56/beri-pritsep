# Story 002: Страница прицепа с детальной информацией

## Scope
Создание детальной страницы прицепа с галереей фотографий, характеристиками, ценообразованием и функциональностью бронирования.

## Acceptance Criteria

### Frontend (React компоненты)
- [ ] **Галерея фотографий**
  - Отображение 3-6 фотографий прицепа в слайдере
  - Возможность просмотра в полноэкранном режиме
  - Индикаторы текущего изображения
  - Lazy loading для оптимизации загрузки

- [ ] **Информация о прицепе**
  - Название прицепа (например: "Прицеп-фургон 2т")
  - Подробное описание назначения и особенностей
  - Технические характеристики:
    - Габариты: Длина × Ширина × Высота (мм)
    - Грузоподъемность (кг)
    - Наличие тента (да/нет)
    - Количество осей
    - Тип тормозной системы
    - Масса прицепа (кг)

- [ ] **Ценообразование**
  - Минимальная аренда: 2 часа за 500₽
  - Почасовая ставка: 100₽ за дополнительный час
  - Суточная аренда: 900₽ за 24 часа
  - Залог: 5000₽ (фиксированно)
  - Дополнительная услуга "Забор прицепа": 500₽

- [ ] **Информация о локации**
  - Название и адрес локации
  - Время работы
  - Контактная информация
  - Интерактивная карта (опционально)

- [ ] **Кнопки бронирования**
  - "Почасовая аренда" → переход к форме с выбором времени
  - "Посуточная аренда" → переход к форме с выбором дат
  - Предварительный расчет стоимости при выборе типа

### Backend (API endpoints)
- [ ] **GET /api/trailers/:id**
  - Возврат полной информации о прицепе
  - Включение фотографий, характеристик, цены
  - Информация о доступности в реальном времени

- [ ] **GET /api/trailers/:id/availability**
  - Проверка доступности прицепа на конкретные даты
  - Возврат свободных временных слотов

### In-memory storage
- [ ] **Структура данных прицепа**
  ```typescript
  interface Trailer {
    id: string;
    name: string;
    description: string;
    photos: string[];
    dimensions: {
      length: number;
      width: number;
      height: number;
    };
    capacity: number; // грузоподъемность
    hasTent: boolean;
    axles: number;
    brakeType: string;
    weight: number;
    locationId: string;
    pricing: {
      minHours: 2;
      minCost: 500;
      hourPrice: 100;
      dayPrice: 900;
      deposit: 5000;
      pickupPrice: 500;
    };
    status: 'AVAILABLE' | 'RENTED' | 'MAINTENANCE';
  }
  ```

## Риски

### Технические риски
- **Производительность галереи** - медленная загрузка большого количества фотографий
- **In-memory ограничения** - ограниченное количество прицепов из-за размера RAM
- **Синхронизация данных** - рассинхронизация между frontend и backend

### UX риски
- **Перегруженность информацией** - слишком много данных на одной странице
- **Сложность навигации** - пользователь может потеряться в деталях

## Тест-кейсы

### Frontend тестирование
1. **Загрузка страницы прицепа**
   - Переход на страницу с валидным ID прицепа
   - Ожидаемый результат: корректное отображение всех данных

2. **Галерея фотографий**
   - Просмотр всех фотографий в слайдере
   - Ожидаемый результат: плавная навигация, корректное отображение

3. **Кнопки бронирования**
   - Нажатие "Почасовая аренда"
   - Ожидаемый результат: переход к форме бронирования с предзаполненными данными

4. **Адаптивность**
   - Тестирование на различных размерах экранов
   - Ожидаемый результат: корректное отображение на всех устройствах

### Backend тестирование
1. **API получения данных прицепа**
   - Запрос GET /api/trailers/valid-id
   - Ожидаемый результат: возврат полной информации о прицепе

2. **API проверки доступности**
   - Запрос доступности на конкретную дату
   - Ожидаемый результат: корректная информация о свободных слотах

3. **Обработка несуществующего прицепа**
   - Запрос GET /api/trailers/invalid-id
   - Ожидаемый результат: ошибка 404

### Интеграционное тестирование
1. **Полный цикл просмотра**
   - Открытие страницы → просмотр галереи → выбор типа аренды
   - Ожидаемый результат: плавный переход между этапами

2. **Проверка ценообразования**
   - Выбор различных типов аренды
   - Ожидаемый результат: корректный расчет стоимости

## Дополнительные требования

### Производительность
- Оптимизация изображений (WebP формат)
- Lazy loading для галереи
- Кэширование данных прицепа

### Доступность
- Alt-тексты для всех изображений
- Keyboard navigation для галереи
- Screen reader поддержка

### SEO
- Meta теги для страниц прицепов
- Structured data для поисковых систем
- Оптимизация URL структуры

## Definition of Done
- [ ] Галерея фотографий работает корректно
- [ ] Все характеристики прицепа отображаются
- [ ] Ценообразование рассчитывается правильно
- [ ] Кнопки бронирования ведут к соответствующим формам
- [ ] API endpoints возвращают корректные данные
- [ ] In-memory storage содержит актуальную информацию
- [ ] Все тест-кейсы пройдены
- [ ] Код покрыт тестами
- [ ] Документация обновлена
